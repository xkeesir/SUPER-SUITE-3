import{c as r,a as t,o as a,_ as E,r as c,p as N,b as i,u,w as k,n as P,t as g,i as F,g as m,d,T as H}from"./index-D8F6cd-s.js";import{r as U}from"./CpuChipIcon-CiABMAUY.js";import{a as V,r as R}from"./CommandLineIcon-CfHX2iI8.js";function O(b,p){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function z(b,p){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})])}function I(b,p){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Y(b,p){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const Z={class:"h-full flex flex-col lg:flex-row gap-6"},W={class:"lg:w-1/3 flex flex-col gap-4"},G={class:"bg-cyber-panel border border-slate-700 rounded-xl p-6 shadow-xl relative overflow-hidden group"},K={class:"text-xl font-bold text-white mb-6 flex items-center gap-2"},q={class:"space-y-6"},J={key:0,class:"flex flex-col items-center gap-2"},Q={key:1,class:"flex flex-col items-center gap-2 z-10 w-full"},X={class:"text-sm text-white font-mono break-all"},ee={class:"text-xs text-slate-400"},te={key:0,class:"space-y-3"},se={class:"bg-slate-900/50 rounded-lg p-3 border border-slate-700"},oe={class:"font-mono text-yellow-400 text-xs tracking-widest"},le={class:"grid grid-cols-2 gap-3"},re={class:"bg-slate-900/50 rounded-lg p-3 border border-slate-700"},ae={class:"font-mono text-slate-300 text-xs truncate"},ne=["disabled"],ie={key:0,class:"flex items-center justify-center gap-2"},de={key:1,class:"flex items-center justify-center gap-2"},ce={class:"flex-1 flex flex-col min-w-0 h-full"},ue={class:"flex-1 bg-[#1e1e1e] border border-slate-700 rounded-xl shadow-2xl flex flex-col overflow-hidden relative group"},pe={class:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-black"},fe={class:"text-xs text-slate-400 font-mono"},xe={class:"flex items-center gap-3"},ve={class:"flex-1 relative overflow-hidden"},ge={key:0,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-600"},me={key:1,class:"absolute inset-0 flex items-center justify-center bg-black/50 z-10 backdrop-blur-sm"},be={key:2,class:"h-full w-full p-4 overflow-auto font-mono text-sm leading-6 text-gray-300 custom-scrollbar"},he=["innerHTML"],we={__name:"PycDecompiler",setup(b){const p=c(null),n=c(null),h=c(!1),f=c(!1),l=c(""),y=c(""),w=c(""),D=N(()=>{if(!l.value)return"";let s=l.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return[{regex:/(#.*)/g,class:"text-slate-500 italic"},{regex:/\b(def|class|import|from|return|if|else|elif|for|while|try|except|with|as|pass|lambda)\b/g,class:"text-purple-400 font-bold"},{regex:/\b(print|len|range|open|str|int|float|list|dict|set)\b/g,class:"text-yellow-300"},{regex:/(['"])(?:(?=(\\?))\2.)*?\1/g,class:"text-green-400"},{regex:/\b\d+\b/g,class:"text-blue-400"},{regex:/(LOAD_CONST|LOAD_NAME|STORE_NAME|RETURN_VALUE|CALL_FUNCTION)/g,class:"text-pink-400 font-bold"}].forEach(o=>{s=s.replace(o.regex,`<span class="${o.class}">$1</span>`)}),s}),A=s=>{if(s===0)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,v)).toFixed(2))+" "+o[v]},M=()=>p.value.click(),B=async s=>{const e=await s.slice(0,16).arrayBuffer(),o=new DataView(e),v=[];for(let x=0;x<4;x++)v.push(o.getUint8(x).toString(16).padStart(2,"0"));y.value=v.join(" ").toUpperCase();try{const x=o.getUint32(4,!0),_=new Date(x*1e3);_.getFullYear()>1990&&_.getFullYear()<2030?w.value=_.toLocaleString():w.value="Unknown Format"}catch{w.value="N/A"}},T=s=>{const e=s.target.files[0];e&&C(e)},S=s=>{h.value=!1;const e=s.dataTransfer.files[0];e&&e.name.endsWith(".pyc")&&C(e)},C=s=>{n.value=s,l.value="",B(s)},j=async()=>{if(!n.value)return;f.value=!0,l.value="";const s=new FormData;s.append("file",n.value);try{const e=await fetch("/api/decompile",{method:"POST",body:s});if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);const o=await e.json();o.status==="error"?l.value=o.source_code||`Error: ${o.message}`:l.value=o.source_code}catch(e){l.value=`# Error communicating with server.
# Details: ${e.message}`}finally{f.value=!1}},L=()=>{l.value&&navigator.clipboard.writeText(l.value)},$=()=>{if(!l.value)return;const s=new Blob([l.value],{type:"text/python"}),e=URL.createObjectURL(s),o=document.createElement("a");o.href=e,o.download=n.value.name.replace(".pyc",".py"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(e)};return(s,e)=>(a(),r("div",Z,[t("div",W,[t("div",G,[e[10]||(e[10]=t("div",{class:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-all"},null,-1)),t("h2",K,[i(u(U),{class:"w-6 h-6 text-blue-400"}),e[2]||(e[2]=t("span",null,"PYC Reverse",-1))]),t("div",q,[t("div",{class:P(["border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center text-center transition-all cursor-pointer relative",[h.value?"border-cyber-primary bg-cyber-primary/10":"border-slate-700 hover:border-slate-500 bg-slate-800/50"]]),onDragover:e[0]||(e[0]=k(o=>h.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=k(o=>h.value=!1,["prevent"])),onDrop:k(S,["prevent"]),onClick:M},[t("input",{type:"file",ref_key:"fileInputRef",ref:p,class:"hidden",accept:".pyc",onChange:T},null,544),n.value?(a(),r("div",Q,[i(u(Y),{class:"w-8 h-8 text-cyber-primary"}),t("p",X,g(n.value.name),1),t("p",ee,g(A(n.value.size)),1)])):(a(),r("div",J,[i(u(I),{class:"w-10 h-10 text-slate-500"}),e[3]||(e[3]=t("p",{class:"text-sm text-slate-400 font-bold"},"Click or Drag .pyc file",-1)),e[4]||(e[4]=t("p",{class:"text-xs text-slate-600"},"Supports Python 2.7 - 3.11+",-1))]))],34),i(H,{name:"fade"},{default:F(()=>[y.value?(a(),r("div",te,[t("div",se,[e[5]||(e[5]=t("div",{class:"text-[10px] uppercase text-slate-500 font-bold mb-1"},"Magic Bytes (Hex)",-1)),t("div",oe,g(y.value),1)]),t("div",le,[e[7]||(e[7]=t("div",{class:"bg-slate-900/50 rounded-lg p-3 border border-slate-700"},[t("div",{class:"text-[10px] uppercase text-slate-500 font-bold mb-1"},"Analyzer"),t("div",{class:"font-mono text-cyber-primary text-sm flex items-center gap-1"},[t("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg",class:"w-4 h-4",alt:"py"}),d(" PyCDC (C++) ")])],-1)),t("div",re,[e[6]||(e[6]=t("div",{class:"text-[10px] uppercase text-slate-500 font-bold mb-1"},"Timestamp",-1)),t("div",ae,g(w.value||"N/A"),1)])])])):m("",!0)]),_:1}),t("button",{onClick:j,disabled:!n.value||f.value,class:"w-full py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02]"},[f.value?(a(),r("span",ie,[...e[8]||(e[8]=[t("span",{class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},null,-1),d(" Decompiling... ",-1)])])):(a(),r("span",de,[i(u(z),{class:"w-5 h-5"}),e[9]||(e[9]=d(" Start Decompilation ",-1))]))],8,ne)])]),e[11]||(e[11]=t("div",{class:"bg-cyber-panel/50 border border-slate-800 rounded-xl p-4 text-xs text-slate-500 leading-relaxed"},[t("p",null,[t("strong",{class:"text-slate-300"},"NOTE:"),d(" Powered by "),t("code",{class:"bg-slate-700 px-1 rounded text-blue-300"},"PyCDC"),d(" & "),t("code",{class:"bg-slate-700 px-1 rounded text-blue-300"},"PyCDAS"),d(". If decompilation fails (common with obfuscated code), it will automatically fallback to Disassembly view. ")])],-1))]),t("div",ce,[t("div",ue,[t("div",pe,[e[14]||(e[14]=t("div",{class:"flex gap-2"},[t("div",{class:"w-3 h-3 rounded-full bg-[#ff5f56]"}),t("div",{class:"w-3 h-3 rounded-full bg-[#ffbd2e]"}),t("div",{class:"w-3 h-3 rounded-full bg-[#27c93f]"})],-1)),t("div",fe,g(n.value?`${n.value.name.replace(".pyc",".py")}`:"untitled.py"),1),t("div",xe,[l.value?(a(),r("button",{key:0,onClick:$,class:"text-xs text-slate-400 hover:text-white flex items-center gap-1 transition-colors"},[i(u(O),{class:"w-3 h-3"}),e[12]||(e[12]=d(" Save ",-1))])):m("",!0),l.value?(a(),r("button",{key:1,onClick:L,class:"text-xs text-slate-400 hover:text-white flex items-center gap-1 transition-colors"},[i(u(V),{class:"w-3 h-3"}),e[13]||(e[13]=d(" Copy ",-1))])):m("",!0)])]),t("div",ve,[!l.value&&!f.value?(a(),r("div",ge,[i(u(R),{class:"w-16 h-16 opacity-20 mb-4"}),e[15]||(e[15]=t("p",{class:"font-mono text-sm"},"Waiting for bytecode input...",-1))])):f.value?(a(),r("div",me,[...e[16]||(e[16]=[t("div",{class:"font-mono text-cyber-primary animate-pulse"}," > Analyzing Bytecode... ",-1)])])):m("",!0),l.value?(a(),r("pre",be,[t("code",{class:"language-python block",innerHTML:D.value},null,8,he)])):m("",!0)])])])]))}},Ce=E(we,[["__scopeId","data-v-3ccb9951"]]);export{Ce as default};
